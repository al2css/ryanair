function initializeMap() {
    var CentralEurope = new google.maps.LatLng(50.84811, 14.5909), mapOptions = {
        zoom: 4,
        minZoom: 4,
        maxZoom: 8,
        center: CentralEurope,
        mapTypeId: google.maps.MapTypeId.TERRAIN
    };
    map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions), infoWindow = new google.maps.InfoWindow();
}

function addMarker(location) {
    var marker = new google.maps.Marker({
        position: new google.maps.LatLng(location.latitude, location.longitude),
        map: map,
        icon: image,
        title: location.name,
        code: location.iataCode
    });
    marker.content = '<p class="infoWindowContent">' + location.country.name + "</p>", 
    marker.content += '<p class="infoWindowContent">Lat: ' + location.latitude + "/Long: " + location.longitude + "</p>", 
    markers.push(marker), google.maps.event.addListener(marker, "click", function() {
        infoWindow.setContent('<h2 class="infoWindowTitle">' + marker.title + " (#" + marker.code + ")</h2>" + marker.content), 
        infoWindow.open(map, marker);
    });
}

function setAllMap(map) {
    for (var i = 0; i < markers.length; i++) markers[i].setMap(map);
}

function clearMarkers() {
    setAllMap(null);
}

function showMarkers() {
    setAllMap(map);
}

function deleteMarkers() {
    clearMarkers(), markers = [];
}

var map, markers = [], image = "images/ryanair_small.png", infoWindow, RyanairApp = angular.module("RyanairApp", [ "ngRoute", "ngTouch", "ngSanitize" ]);

RyanairApp.config([ "$routeProvider", function($routeProvider) {
    $routeProvider.when("/map", {
        controller: "MapCtrl",
        templateUrl: "app/partials/_map.html",
        controllerAs: "map"
    }).otherwise({
        redirectTo: "/map"
    });
} ]), RyanairApp.controller("MapCtrl", [ "$scope", "$filter", "AirportsFactory", function($scope, $filter, AirportsFactory) {
    this.title = "Ryanair's European Destinations on Map", $scope.airports = {}, AirportsFactory.getAirports().then(angular.bind(this, function() {
        $scope.airports = AirportsFactory.airports, $scope.copyAirports = $scope.airports, 
        initializeMap(), $scope.$watch("map.search", function(val) {
            $scope.airports = $filter("filter")($scope.copyAirports, val), clearMarkers();
            for (var i = 0, len = $scope.airports.length; len > i; i++) addMarker($scope.airports[i]);
        });
    }));
} ]), angular.module("RyanairApp").factory("AirportsFactory", [ "$q", "$http", "$location", function($q, $http, $location) {
    "use strict";
    var exports = {};
    return exports.airports = {}, exports.getAirports = function() {
        var deferred = $q.defer();
        return $http.get("app/json/airports.json").success(function(data) {
            exports.airports = data, deferred.resolve(data);
        }).error(function(data) {
            deferred.reject(data);
        });
        return deferred.promise;
    }, exports;
} ]);
//# sourceMappingURL=global.min.map