var generateMaps={map:null,markers:[],image:"images/ryanair_small.png",infoWindow:null,initializeMap:function(){var a=new google.maps.LatLng(50.84811,14.5909),b={zoom:5,minZoom:4,maxZoom:8,center:a,mapTypeId:google.maps.MapTypeId.TERRAIN};generateMaps.map=new google.maps.Map(document.getElementById("map_canvas"),b),generateMaps.infoWindow=new google.maps.InfoWindow},addMarker:function(a){var b=new google.maps.Marker({position:new google.maps.LatLng(a.latitude,a.longitude),map:generateMaps.map,icon:generateMaps.image,title:a.name,code:a.iataCode});b.content='<p class="infoWindowContent">'+a.country.name+"</p>",b.content+='<p class="infoWindowContent">Lat: '+a.latitude+"/Long: "+a.longitude+"</p>",generateMaps.markers.push(b),google.maps.event.addListener(b,"click",function(){generateMaps.infoWindow.setContent('<h2 class="infoWindowTitle">'+b.title+" (#"+b.code+")</h2>"+b.content),generateMaps.infoWindow.open(generateMaps.map,b)})},setAllMap:function(a){for(var b=0,c=generateMaps.markers.length;c>b;b++)generateMaps.markers[b].setMap(a)},clearMarkers:function(){generateMaps.setAllMap(null)},showMarkers:function(){generateMaps.setAllMap(generateMaps.map)},deleteMarkers:function(){generateMaps.clearMarkers(),generateMaps.markers=[]}},RyanairApp=angular.module("RyanairApp",["ngRoute","ngTouch","ngSanitize"]);RyanairApp.config(["$routeProvider",function(a){a.when("/map",{controller:"MapCtrl",templateUrl:"app/partials/_map.html",controllerAs:"map"}).otherwise({redirectTo:"/map"})}]),RyanairApp.controller("MapCtrl",["$scope","$filter","AirportsFactory",function(a,b,c){this.title="Ryanair's European Destinations on Map",a.airports={},c.getAirports().then(angular.bind(this,function(){a.airports=c.airports,a.copyAirports=a.airports,generateMaps.initializeMap(),a.$watch("map.search",function(c){a.airports=b("filter")(a.copyAirports,c),generateMaps.clearMarkers();for(var d=0,e=a.airports.length;e>d;d++)generateMaps.addMarker(a.airports[d])})}))}]),angular.module("RyanairApp").factory("AirportsFactory",["$q","$http","$location",function(a,b,c){"use strict";var d={};return d.airports={},d.getAirports=function(){var c=a.defer();return b.get("app/json/airports.json").success(function(a){d.airports=a,c.resolve(a)}).error(function(a){c.reject(a)})},d}]);